dnl Process this with autoconf to create configure
AC_INIT(doc/kawa.texi)

AM_INIT_AUTOMAKE(kawa, 1.6.59)

AM_MAINTAINER_MODE
AC_PROG_CC
AC_EXEEXT

AC_ARG_PROGRAM
dnl AC_ARG_WITH(classpath,[  --with-classpath          Path to Java classes], classpath=$withval, classpath=$$CLASSPATH)
AC_ARG_ENABLE(kawa-frontend,
  [  --enable-kawa-frontend   Build "kawa" front-end program using readline],
  enable_kawa_frontend=$enableval, enable_kawa_frontend=no)
if test $enable_kawa_frontend = yes ; then
  kawa_bin=kawa
fi

AC_ARG_WITH(swing,
  [  --with-swing  Assume Swing (Java Foundation Classes) is available])

#AM_PROG_INSTALL
#AC_PROG_MAKE_SET

JAVA=${JAVA-java}
JAVAC=${JAVAC-javac}
AC_SUBST(JAVA)
AC_SUBST(JAVAC)
AC_SUBST(kawa_bin)
dnl We must have the absolute path to the build directory.
TOP_BUILDDIR=`pwd`

case ${with_swing} in
  yes) extra_java='$(java_SWING)' ;;
  *) extra_java='' ;;
esac
  
AC_SUBST(extra_java)
AC_SUBST(TOP_BUILDDIR)
AC_SUBST(CC)
AC_SUBST(CFLAGS)
AC_SUBST(PACKAGE)
AC_SUBST(VERSION)
AC_SUBST(SHELL)

# ${javatop} is normally empty, but is useful when the tree has been
# re-arranged so that Java packages are up a level.
AC_OUTPUT(Makefile ${javatop}gnu/Makefile ${javatop}gnu/bytecode/Makefile
  ${javatop}gnu/math/Makefile ${javatop}gnu/text/Makefile
  ${javatop}gnu/mapping/Makefile ${javatop}gnu/expr/Makefile
  ${javatop}gnu/ecmascript/Makefile ${javatop}gnu/elisp/Makefile
  ${javatop}gnu/emacs/Makefile
  ${javatop}kawa/Makefile ${javatop}kawa/lang/Makefile 
  ${javatop}kawa/standard/Makefile ${javatop}kawa/lib/Makefile
  doc/Makefile testsuite/Makefile)
