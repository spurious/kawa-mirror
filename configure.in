dnl Process this with autoconf to create configure
AC_INIT(kawa/repl.java)

AM_INIT_AUTOMAKE(kawa, 1.4)

AM_MAINTAINER_MODE

#PACKAGE=kawa
#VERSION=2.0alpha
AC_CONFIG_AUX_DIR(.)
AC_ARG_PROGRAM
AC_ARG_WITH(jdk11,[  --with-jdk11            Assume JDK1.1 (or compatible) class libraries])
dnl AC_ARG_WITH(classpath,[  --with-classpath          Path to Java classes], classpath=$withval, classpath=$$CLASSPATH)
#AM_PROG_INSTALL
#AC_PROG_MAKE_SET

JAVA=${JAVA-java}
JAVAC=${JAVAC-javac}
AC_SUBST(JAVA)
AC_SUBST(JAVAC)
dnl We must have the absolute path to the build directory.
TOP_BUILDDIR=`pwd`
AC_SUBST(TOP_BUILDDIR)
case ${with_jdk11} in
  yes)  JAVA_VERSION=1_1;;
  no)  JAVA_VERSION=1_0;;
  *)  JAVA_VERSION=1_0;;
esac
EXTRA_OBJ='$(OBJ_'${JAVA_VERSION}')'
EXTRA_MISC='$(MISC_'${JAVA_VERSION}')'
AC_SUBST(EXTRA_OBJ)
AC_SUBST(EXTRA_MISC)
AC_SUBST(JAVA_VERSION)

AC_SUBST(PACKAGE)
AC_SUBST(VERSION)
AC_OUTPUT(Makefile gnu/Makefile gnu/bytecode/Makefile gnu/math/Makefile kawa/Makefile kawa/lang/Makefile kawa/standard/Makefile kawa/lib/Makefile doc/Makefile testsuite/Makefile)
